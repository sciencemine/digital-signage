<div class="video-player__background--container">
  {{video-player
    muted=displayVideoSelect
    class=(if displayVideo 'video-player__hidden' 'video-player__darken')
    playing=(if displayVideo false true)
    url=(make-local-url data.config.modelIdentifier backgroundVideoUrl)
    onEndedCallback=(action 'cycleBackground')
  }}
</div>


{{#if displayVideoSelect}}
    {{!video-list
      selectedVidPos=0
      class="video-list video-list--flex"
      listItemClass="video-list-item--flex"
      listItemSmall="video-list-item--flex__small"
      listItemSelected="video-list-item--selected"
      listItemHighlight="blue-border"
      keyboard=data.config.keyboard
      videos=selectionVideos
      modelIdentifier=data.config.modelIdentifier
      focus=displayVideoSelect
      onSelectedCallback=(action 'videoSelected')
      onCancelledCallback=(action 'cancelPressed')
      onHoverCallback=(action 'doNothing')
      onInputCallback=(action 'resetTimeout')
    }}
{{/if}}

{{#if showAfterVideoList}}
  {{after-video-list
    data=afterVideoListData
    config=data.config
    onInputCallback=(action 'resetTimeout')
    videoSelectedCallback=(action 'doNothing')
  }}
{{/if}}

{{#if displayVideo}}
  <div class="video-player__fullscreen">
    {{video-player
      playing=videoPlaying
      muted=false
      url=video
      onClickCallback=(action 'videoSelected' bubbles=false)
      onHoverCallback=(action 'doNothing')
      onEndedCallback=(action 'videoEnded')
      videoPos=backgroundVideoPos
    }}
  </div>
{{/if}}

{{menu-bar
  popoverShowDelay=data.config.ui.popoverShowDelay
  config=data.config
  videos=selectionVideos
  attributes=data.attributes
  onClickCallback=(action 'videoSelected')
}}

{{!-- Map view stack-list --}}
{{stack-list
  isFlex=false
  onHoverCallback=(action 'doNothing')
  onSelectedCallback=(action 'doNothing')
  onCancelledCallback=(action 'doNothing')
  onInputCallback=(action 'resetTimeout')
  onStackChangeCallback=(action 'doNothing')
  class="stack-list no-outline"
  stackItemHighlight="blue-border"
  data=mapData
  focus=true
  stackItemClass="stack-list-item--flex"
  keyboard=data.config.keyboard
  modelIdentifier=config.modelIdentifier
}}

{{!-- Flex view stack-list --}}
{{!stack-list
  isFlex=true
  onHoverCallback=(action 'doNothing')
  onSelectedCallback=(action 'doNothing')
  onCancelledCallback=(action 'doNothing')
  onInputCallback=(action 'resetTimeout')
  onStackChangeCallback=(action 'doNothing')
  class="stack-list no-outline"
  stackItemHighlight="blue-border"
  data=mapData
  focus=true
  stackItemClass="stack-list-item--flex"
  keyboard=data.config.keyboard
  modelIdentifier=config.modelIdentifier
}}

{{yield}}
